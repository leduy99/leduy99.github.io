<!DOCTYPE html>
<html lang="en">
  <head>
    <!--
      Complete Portfolio v5
      - ORIGINAL DOM-based particle FX (trailSpark + clickSpark)
      - Sticky sidebar, aurora + subtle blobs, glass cards, timeline
      - Loader overlay, magnetic buttons, scroll progress bar
      - "Hi, I'm Duy Le" loops every 4s AND has a flickering underscore cursor (retro terminal)
      - Updated info: MBZUAI, Masdar City, new Education timeline
    -->

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Duy Le — Portfolio</title>

    <!-- Tailwind CSS (CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>tailwind.config = { darkMode: 'class' };</script>

    <!-- Apply saved theme ASAP to avoid FOUC -->
    <script>
      (function () {
        try {
          const t = localStorage.getItem('theme');
          if (t === 'light') document.documentElement.classList.remove('dark');
          else document.documentElement.classList.add('dark');
        } catch (e) {}
      })();
    </script>

    <!-- Inter variable font -->
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:slnt,wght@-10..0,100..900&display=swap" rel="stylesheet" />

    <!-- AOS (optional) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" />

    <style>
      /* Base typography + gentle theme transition */
      html {
        font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
        transition: background-color 0.35s ease, color 0.35s ease;
      }

      /* Aurora background layer (calm), behind everything */
      .aurora {
        position: fixed; inset: 0; z-index: -3; pointer-events: none;
        background:
          radial-gradient(1200px 600px at 10% 10%, rgba(59,130,246,.15), transparent 60%),
          radial-gradient(1000px 500px at 90% 20%, rgba(45,212,191,.12), transparent 60%),
          radial-gradient(900px 600px at 50% 100%, rgba(99,102,241,.18), transparent 60%);
        filter: blur(30px);
      }
      .dark .aurora {
        background:
          radial-gradient(1200px 600px at 10% 10%, rgba(59,130,246,.18), transparent 60%),
          radial-gradient(1000px 500px at 90% 20%, rgba(45,212,191,.16), transparent 60%),
          radial-gradient(900px 600px at 50% 100%, rgba(99,102,241,.22), transparent 60%);
      }

      /* Floating blobs (fun but subtle, CPU-cheap) */
      .blobs { position: fixed; inset: 0; z-index: -2; pointer-events: none; overflow: hidden; }
      .blob {
        position: absolute; width: 32vmax; height: 32vmax; border-radius: 50%;
        filter: blur(40px); opacity: .12; will-change: transform;
        animation: drift 38s ease-in-out infinite;
      }
      .blob:nth-child(1){ left:-10vmax; top:5vmax; background: #60a5fa; animation-delay: 0s;}
      .blob:nth-child(2){ right:-12vmax; top:-8vmax; background: #22d3ee; animation-delay: 6s;}
      .blob:nth-child(3){ left:20%; bottom:-12vmax; background: #818cf8; animation-delay: 12s;}
      @keyframes drift {
        0%   { transform: translate3d(0,0,0) scale(1); }
        50%  { transform: translate3d(4vmax,-3vmax,0) scale(1.08); }
        100% { transform: translate3d(0,0,0) scale(1); }
      }
      .dark .blob { opacity: .16; }

      /* Reduced motion: keep visuals static */
      @media (prefers-reduced-motion: reduce) {
        .aurora { filter: blur(24px); }
        .blob { animation: none !important; }
      }

      /* Glass card helper */
      .glass {
        background: rgba(255,255,255,.6);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        border: 1px solid rgba(255,255,255,.2);
      }
      .dark .glass {
        background: rgba(2,6,23,.6); /* slate-950 */
        border-color: rgba(255,255,255,.08);
      }

      /* Gradient brand text */
      .brand-gradient {
        background: linear-gradient(90deg, #06b6d4, #3b82f6);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }
      .dark .brand-gradient {
        background: linear-gradient(90deg, #2dd4bf, #2563eb);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }

      /* Publications timeline bullets */
      .timeline-dot {
        position: absolute; left: -0.4rem; top: 1.4rem;
        width: .75rem; height: .75rem; border-radius: 9999px;
        background: #06b6d4;
        box-shadow: 0 0 0 6px rgba(255,255,255,.6);
      }
      .dark .timeline-dot { box-shadow: 0 0 0 6px rgba(2,6,23,.6); }

      /* Typed heading (terminal style color) */
      #typed-about-me {
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
        font-weight: 700; color: #2563eb;
      }
      .dark #typed-about-me { color: #2dd4bf; }

      /* Flickering underscore cursor (retro) */
      #typed-cursor {
        display: inline-block;
        width: 0.6ch;
        margin-left: 2px;
        /* underscore character is the content itself; keep same color as text */
        animation: cursorBlink .9s steps(2, start) infinite;
      }
      @keyframes cursorBlink {
        0%, 49% { opacity: 1; }
        50%, 100% { opacity: 0; }
      }
      @media (prefers-reduced-motion: reduce) {
        #typed-cursor { animation: none; opacity: 1; }
      }

      /* Fun but tiny tilt on hover */
      .hover-tilt { transition: transform .25s ease; }
      .hover-tilt:hover { transform: rotate(.4deg) translateY(-2px); }

      /* Scroll progress bar (top line) */
      #scrollProgress {
        position: fixed; top: 0; left: 0; height: 3px; width: 0%;
        z-index: 60; /* above nav */
        background: linear-gradient(90deg, #22d3ee, #3b82f6);
        box-shadow: 0 0 12px rgba(59,130,246,.6);
        transform-origin: left center;
      }
      .dark #scrollProgress { box-shadow: 0 0 12px rgba(45,212,191,.6); }

      /* === ORIGINAL DOM-BASED SPARK FX (restored) === */
      .trailSpark {
        position: absolute;
        width: 8px; height: 8px; border-radius: 50%;
        pointer-events: none;
        background: radial-gradient(circle, rgba(255,255,255,0.5) 0%, rgba(255,255,255,0) 70%);
        animation: trailFade 0.6s linear forwards;
        z-index: 9999;
      }
      @keyframes trailFade {
        0% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        100% { opacity: 0; transform: translate(-50%, -50%) scale(2); }
      }
      .clickSpark {
        position: absolute;
        width: 15px; height: 15px; border-radius: 50%;
        pointer-events: none;
        animation: clickSparkFade 0.7s ease-out forwards;
        z-index: 9999;
      }
      @keyframes clickSparkFade {
        0% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        50% { opacity: 0.8; transform: translate(-50%, -50%) scale(2.5); background: #fff; }
        100% { opacity: 0; transform: translate(-50%, -50%) scale(0.2); }
      }
    </style>
  </head>

  <body class="min-h-screen bg-slate-50 text-slate-800 dark:bg-slate-950 dark:text-slate-300">
    <!-- Loader Overlay (fades out on load) -->
    <div id="loader" class="fixed inset-0 z-[70] grid place-items-center bg-white/90 dark:bg-slate-950/90 backdrop-blur">
      <div class="relative w-28 h-28">
        <!-- Orbiting dots -->
        <div class="absolute inset-0 animate-[spin_2.2s_linear_infinite]">
          <div class="absolute left-1/2 top-0 -translate-x-1/2 w-3 h-3 rounded-full bg-gradient-to-b from-cyan-400 to-blue-600"></div>
          <div class="absolute left-0 top-1/2 -translate-y-1/2 w-3 h-3 rounded-full bg-gradient-to-b from-violet-400 to-cyan-400"></div>
          <div class="absolute right-0 top-1/2 -translate-y-1/2 w-3 h-3 rounded-full bg-gradient-to-b from-blue-400 to-violet-500"></div>
          <div class="absolute left-1/2 bottom-0 -translate-x-1/2 w-3 h-3 rounded-full bg-gradient-to-b from-teal-400 to-blue-500"></div>
        </div>
        <!-- Center badge -->
        <div class="absolute inset-0 grid place-items-center">
          <div class="px-4 py-2 rounded-xl bg-white/70 dark:bg-slate-900/70 border border-white/30 dark:border-white/10 backdrop-blur text-slate-800 dark:text-slate-200 text-sm font-medium">
            Loading Duy Le…
          </div>
        </div>
      </div>
    </div>

    <!-- Scroll progress bar -->
    <div id="scrollProgress" aria-hidden="true"></div>

    <!-- Background layers -->
    <div class="aurora" aria-hidden="true"></div>
    <div class="blobs" aria-hidden="true">
      <div class="blob"></div>
      <div class="blob"></div>
      <div class="blob"></div>
    </div>

    <!-- Top navigation -->
    <nav class="sticky top-0 z-50 backdrop-blur border-b border-slate-200/70 dark:border-slate-800/80 bg-white/70 dark:bg-slate-900/60">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
        <a href="#" class="text-lg md:text-xl font-semibold brand-gradient" aria-label="Home">Le Dinh Anh Duy</a>
        <ul class="hidden md:flex items-center gap-6 text-sm">
          <li><a class="hover:text-blue-600 dark:hover:text-teal-400" href="#about">About</a></li>
          <li><a class="hover:text-blue-600 dark:hover:text-teal-400" href="#news">News</a></li>
          <li><a class="hover:text-blue-600 dark:hover:text-teal-400" href="#publications">Publications</a></li>
          <li><a class="hover:text-blue-600 dark:hover:text-teal-400" href="#careers">Education & Careers</a></li>
        </ul>
        <button
          id="toggleThemeBtn"
          type="button"
          aria-pressed="false"
          class="magnet ml-4 inline-flex items-center gap-2 rounded-xl border border-slate-300/70 dark:border-slate-700/70 px-3 py-1.5 text-sm
                 bg-white/70 dark:bg-slate-900/60 hover:bg-white/90 dark:hover:bg-slate-900/80
                 text-slate-700 dark:text-slate-200"
        >
          <span aria-hidden="true">🌓</span>
          <span class="sr-only">Toggle dark mode</span>
          <span id="themeLabel">Theme</span>
        </button>
      </div>
    </nav>

    <!-- Hero -->
    <header class="relative isolate max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-6 md:pt-8 pb-4">
      <h1 class="text-2xl md:text-4xl font-semibold tracking-tight text-slate-900 dark:text-slate-100">
        Portfolio
      </h1>
      <p class="mt-1 text-slate-600 dark:text-slate-300">Computer Vision • Research • Engineering</p>
    </header>

    <!-- Main layout with STICKY sidebar (md+) -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-12">
      <div class="flex flex-col md:flex-row md:items-start md:gap-6">
        <!-- Sticky Info Sidebar -->
        <aside class="md:w-1/3 lg:w-1/4 w-full md:sticky md:top-24 h-fit md:self-start mb-6 md:mb-0">
          <section class="glass rounded-2xl shadow-sm p-6 hover-tilt" data-aos="fade-right">
            <div class="w-28 h-28 mx-auto mb-3">
              <img
                src="media/avatar.jpg"
                alt="Portrait of Duy Le"
                width="160" height="160" loading="lazy"
                class="rounded-full w-full h-full object-cover ring-2 ring-white/50 dark:ring-black/30 shadow-lg"
              />
            </div>
            <div class="text-center">
              <h2 class="text-xl font-bold text-slate-800 dark:text-slate-100">Le Dinh Anh Duy</h2>
              <p class="text-slate-600 dark:text-slate-300 text-sm">PhD Student @ MBZUAI</p>
              <p class="mt-3 text-xs text-slate-700/90 dark:text-slate-200/90">
                Trying to bridge the gap between AI power and human imagination.
              </p>
            </div>

            <ul class="mt-4 space-y-2 text-sm text-slate-700 dark:text-slate-200">
              <li class="flex items-center gap-2"><span class="w-5">📍</span> Masdar City, Abu Dhabi, UAE</li>
              <li class="flex items-center gap-2">
                <span class="w-5">✉️</span>
                <a href="mailto:leduy99.work@gmail.com" class="text-blue-700 dark:text-teal-400 hover:underline">leduy99.work@gmail.com</a>
              </li>
              <li class="flex items-center gap-2">
                <span class="w-5">💻</span>
                <a href="https://github.com/leduy99" target="_blank" class="text-blue-700 dark:text-teal-400 hover:underline">GitHub</a>
              </li>
              <li class="flex items-center gap-2">
                <span class="w-5">🎓</span>
                <a href="https://scholar.google.com/citations?user=D2CivSMAAAAJ&hl=en" target="_blank" class="text-blue-700 dark:text-teal-400 hover:underline">Google Scholar</a>
              </li>
            </ul>

            <!-- Quick nav pills -->
            <div class="mt-5 flex flex-wrap gap-2">
              <a href="#publications" class="magnet px-3 py-1.5 rounded-lg border border-slate-300/60 dark:border-slate-700/60 bg-white/60 dark:bg-slate-900/60 backdrop-blur hover:bg-white/80 dark:hover:bg-slate-900/80 text-xs shadow-sm">Publications</a>
              <a href="#news" class="magnet px-3 py-1.5 rounded-lg border border-slate-300/60 dark:border-slate-700/60 bg-white/60 dark:bg-slate-900/60 backdrop-blur hover:bg-white/80 dark:hover:bg-slate-900/80 text-xs shadow-sm">News</a>
              <a href="#careers" class="magnet px-3 py-1.5 rounded-lg border border-slate-300/60 dark:border-slate-700/60 bg-white/60 dark:bg-slate-900/60 backdrop-blur hover:bg-white/80 dark:hover:bg-slate-900/80 text-xs shadow-sm">Education</a>
            </div>
          </section>
        </aside>

        <!-- Main Column -->
        <main class="md:w-2/3 lg:w-3/4 w-full space-y-6" data-aos="fade-up">
          <!-- About -->
          <section id="about" class="glass rounded-2xl shadow-sm p-6 hover-tilt scroll-mt-24">
            <!-- Typewriter text + blinking underscore cursor -->
            <h2 id="typed-about-me" class="text-xl">
              <span id="typed-about-me-text"></span><span id="typed-cursor">_</span>
            </h2>
            <p class="mt-3 text-sm leading-relaxed text-slate-700 dark:text-slate-200">
              I'm a PhD student at MBZUAI, focusing on
              computer vision. From my early days tinkering with computers, I've been passionate about how
              technology can transform human ideas into reality—particularly in creating visuals that help
              share stories, dreams, and experiences. In my free time, I love traveling, gaming, indulging
              in good food, watching anime, and diving into philosophical discussions.
            </p>
          </section>

          <!-- News -->
          <section id="news" class="glass rounded-2xl shadow-sm p-6 hover-tilt scroll-mt-24">
            <h3 class="text-xl font-bold mb-3 text-slate-900 dark:text-slate-100">Latest News</h3>
            <ul class="list-disc list-inside space-y-2 text-sm text-slate-700 dark:text-slate-200">
              <li><span class="font-medium">2024.10:</span> 🎉 Received grant funding for travel trip to ECAI and ACCV.</li>
              <li><span class="font-medium">2024.09:</span> 🎉 Received <b>Reginald R. ‘Barney’ &amp; Jameson A. Baxter Graduate Fellowship</b>.</li>
            </ul>
          </section>

          <!-- Publications -->
          <section id="publications" class="glass rounded-2xl shadow-sm p-6 hover-tilt scroll-mt-24">
            <h3 class="text-xl font-bold mb-4 text-slate-900 dark:text-slate-100">Publications</h3>
            <ol class="relative border-s border-slate-200 dark:border-slate-700">
              <li class="relative pl-6 py-4">
                <span class="timeline-dot"></span>
                <a href="https://uark-aicv.github.io/G2MOT/" target="_blank" rel="noopener" class="font-semibold hover:underline text-slate-800 dark:text-slate-100">
                  Enhanced Kalman with Adaptive Appearance Motion SORT for Grounded Generic Multiple Object Tracking
                </a>
                <div class="mt-1 text-sm text-slate-600 dark:text-slate-300">
                  <b>Duy Le Dinh Anh</b>, Kim Hoang Tran, Quang-Thuc Nguyen, Ngan Hoang Le — <em>ACCV 2024 (oral)</em>
                </div>
              </li>
              <li class="relative pl-6 py-4">
                <span class="timeline-dot"></span>
                <a href="https://fsoft-aic.github.io/TP-GMOT/" target="_blank" rel="noopener" class="font-semibold hover:underline text-slate-800 dark:text-slate-100">
                  TP-GMOT: Tracking Generic Multiple Object by Textual Prompt with Motion-Appearance Cost (MAC) SORT
                </a>
                <div class="mt-1 text-sm text-slate-600 dark:text-slate-300">
                  <b>Duy Le Dinh Anh</b>, Kim Hoang Tran, Ngan Hoang Le — <em>ECAI 2024 (oral)</em>
                </div>
              </li>
              <li class="relative pl-6 py-4">
                <span class="timeline-dot"></span>
                <a href="https://arxiv.org/abs/2311.00729" target="_blank" rel="noopener" class="font-semibold hover:underline text-slate-800 dark:text-slate-100">
                  ZEETAD: Adapting Pretrained Vision-Language Model for Zero-Shot End-to-End Temporal Action Detection
                </a>
                <div class="mt-1 text-sm text-slate-600 dark:text-slate-300">
                  Thinh Phan, Khoa Vo, <b>Duy Le</b>, Gianfranco Doretto, Donald Adjeroh, Ngan Le — <em>WACV 2024</em>
                </div>
              </li>
              <li class="relative pl-6 py-4">
                <span class="timeline-dot"></span>
                <a href="https://fsoft-aic.github.io/Z-GMOT/" target="_blank" rel="noopener" class="font-semibold hover:underline text-slate-800 dark:text-slate-100">
                  Z-GMOT: Zero-shot Generic Multiple Object Tracking
                </a>
                <div class="mt-1 text-sm text-slate-600 dark:text-slate-300">
                  Kim Hoang Tran, <b>Anh Duy Le Dinh</b>, Tien Phat Nguyen, Thinh Phan, Pha Nguyen, Khoa Luu, Donald Adjeroh, Gianfranco Doretto, Ngan Hoang Le — <em>NAACL Findings 2024</em>
                </div>
              </li>
              <li class="relative pl-6 py-4">
                <span class="timeline-dot"></span>
                <a href="https://ieeexplore.ieee.org/abstract/document/10288740" target="_blank" rel="noopener" class="font-semibold hover:underline text-slate-800 dark:text-slate-100">
                  AANet: Motorcycle ReID Using Multi-Atrous Convolution and Self-Attention Mechanisms
                </a>
                <div class="mt-1 text-sm text-slate-600 dark:text-slate-300">
                  Trong-Hieu Nguyen-Mau, Kim-Trang Phu-Thi, <b>Anh-Duy Le-Dinh</b>, Minh-Triet Tran, Hai-Dang Nguyen — <em>MAPR 2023</em>
                </div>
              </li>
            </ol>
          </section>

          <!-- Education & Careers -->
          <section id="careers" class="glass rounded-2xl shadow-sm p-6 hover-tilt scroll-mt-24">
            <h3 class="text-xl font-bold mb-3 text-slate-900 dark:text-slate-100">Education &amp; Careers</h3>
            <ul class="list-disc list-inside text-sm space-y-2 text-slate-700 dark:text-slate-200">
              <li>[2025 – Present] MBZUAI: PhD Student</li>
              <li>[2024 – 2025] University of Arkansas: Research Assistant</li>
              <li>[2023 – 2024] FPT Software — AI Center: Residency</li>
              <li>[2020 – 2023] Phenikaa MaaS: AI Team Lead / Backend Engineer</li>
              <li>[2019 – 2020] HCMUS — Computational Linguistic Center: Research Student</li>
              <li>[2018 – 2019] Piksal Studio: Backend Engineer</li>
              <li>[2017 – 2022] University of Science (HCMUS): Bachelor</li>
              <li>[2014 – 2017] Le Hong Phong High School for the Gifted</li>
            </ul>
          </section>
        </main>
      </div>
    </div>

    <!-- Footer -->
    <footer class="border-t border-slate-200 dark:border-slate-800 bg-white/70 dark:bg-slate-900/60 backdrop-blur">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 text-center text-xs text-slate-600 dark:text-slate-400">
        © 2025 Le Dinh Anh Duy. All rights reserved.
      </div>
    </footer>

    <!-- AOS init -->
    <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
    <script>
      (function () {
        const reduce = matchMedia('(prefers-reduced-motion: reduce)').matches;
        if (!reduce && window.AOS) AOS.init({ duration: 650, easing: 'ease-out', once: true });
      })();
    </script>

    <script>
      // Loader fade-out (respects reduced motion)
      (function () {
        const reduce = matchMedia('(prefers-reduced-motion: reduce)').matches;
        const loader = document.getElementById('loader');
        function hide() {
          if (!loader) return;
          if (reduce) { loader.remove(); return; }
          loader.style.transition = 'opacity .45s ease, visibility 0s linear .45s';
          loader.style.opacity = '0';
          loader.style.visibility = 'hidden';
          setTimeout(() => loader.remove(), 500);
        }
        addEventListener('load', hide);
        setTimeout(hide, 2500); // safety timeout
      })();
    </script>

    <script>
      // Accessible theme toggle
      (function () {
        const btn = document.getElementById('toggleThemeBtn');
        const label = document.getElementById('themeLabel');
        function setPressed(isDark) {
          btn.setAttribute('aria-pressed', String(isDark));
          label.textContent = isDark ? 'Dark' : 'Light';
        }
        function toggleTheme() {
          const isDark = document.documentElement.classList.toggle('dark');
          localStorage.setItem('theme', isDark ? 'dark' : 'light');
          setPressed(isDark);
        }
        btn.addEventListener('click', toggleTheme);
        setPressed(document.documentElement.classList.contains('dark'));
      })();
    </script>

    <script>
      // Typewriter loop with blinking underscore cursor
      (function () {
        const textEl = document.getElementById('typed-about-me-text');
        const textWrap = document.getElementById('typed-about-me'); // color target
        const text = "Hi, I'm Duy Le!";
        const reduce = matchMedia('(prefers-reduced-motion: reduce)').matches;

        if (reduce) {
          if (textEl) textEl.textContent = text;
          return;
        }

        function typeLoop() {
          if (!textEl) return;
          textEl.textContent = '';
          let i = 0;
          (function tick() {
            if (i < text.length) {
              textEl.textContent += text.charAt(i++);
              setTimeout(tick, 65);
            } else {
              // wait 4s then restart typing (cursor continues blinking)
              setTimeout(typeLoop, 4000);
            }
          })();
        }
        setTimeout(typeLoop, 250);
      })();
    </script>

    <script>
      // Magnetic buttons micro-interaction (skip if reduced motion)
      (function () {
        const reduce = matchMedia('(prefers-reduced-motion: reduce)').matches;
        if (reduce) return;

        const magnets = document.querySelectorAll('.magnet');
        const strength = 18; // px pull
        function move(e) {
          const rect = this.getBoundingClientRect();
          const mx = e.clientX - rect.left, my = e.clientY - rect.top;
          const cx = rect.width / 2, cy = rect.height / 2;
          const dx = (mx - cx) / cx, dy = (my - cy) / cy;
          this.style.transform = `translate(${dx * strength}px, ${dy * strength}px)`;
        }
        function reset() { this.style.transform = 'translate(0,0)'; }

        magnets.forEach((el) => {
          el.style.transition = 'transform .18s ease';
          el.addEventListener('mousemove', move);
          el.addEventListener('mouseleave', reset);
        });
      })();
    </script>

    <script>
      // Scroll progress bar
      (function () {
        const bar = document.getElementById('scrollProgress');
        function update() {
          const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
          const docHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
          const p = docHeight ? (scrollTop / docHeight) * 100 : 0;
          bar.style.width = p + '%';
        }
        addEventListener('scroll', update, { passive: true });
        addEventListener('resize', update, { passive: true });
        update();
      })();
    </script>

    <!-- === ORIGINAL DOM-BASED PARTICLE FX === -->
    <script>
      (function () {
        const reduce = matchMedia('(prefers-reduced-motion: reduce)').matches;
        if (reduce) return;

        // 1) continuous ray-of-light on mousemove
        let lastMoveTime = 0;
        let lastX = null, lastY = null;
        let currentHue = Math.floor(Math.random() * 360);

        function placeTrailSpark(x, y, hue) {
          const trail = document.createElement('div');
          trail.className = 'trailSpark';
          trail.style.background = `radial-gradient(circle, hsla(${hue},80%,60%,0.8) 0%, hsla(${hue},80%,60%,0) 70%)`;
          trail.style.left = x + 'px';
          trail.style.top = y + 'px';
          document.body.appendChild(trail);
          setTimeout(() => { trail.remove(); }, 600);
        }

        document.addEventListener('mousemove', (e) => {
          const now = Date.now();
          if (now - lastMoveTime > 200) {
            currentHue = Math.floor(Math.random() * 360);
          }
          lastMoveTime = now;

          if (lastX === null || lastY === null) {
            lastX = e.pageX;
            lastY = e.pageY;
            placeTrailSpark(e.pageX, e.pageY, currentHue);
            return;
          }

          const dx = e.pageX - lastX;
          const dy = e.pageY - lastY;
          const distance = Math.sqrt(dx * dx + dy * dy);

          const steps = Math.max(1, Math.floor(distance / 5));
          for (let i = 0; i < steps; i++) {
            const ratio = i / steps;
            const sx = lastX + dx * ratio;
            const sy = lastY + dy * ratio;
            placeTrailSpark(sx, sy, currentHue);
          }

          placeTrailSpark(e.pageX, e.pageY, currentHue);

          lastX = e.pageX;
          lastY = e.pageY;
        }, { passive: true });

        // 2) colorful fireworks on click
        document.addEventListener('click', (e) => {
          const fireworkContainer = document.createElement('div');
          fireworkContainer.style.position = 'absolute';
          fireworkContainer.style.left = e.pageX + 'px';
          fireworkContainer.style.top = e.pageY + 'px';
          fireworkContainer.style.pointerEvents = 'none';
          document.body.appendChild(fireworkContainer);

          const sparkCount = 12;
          for (let i = 0; i < sparkCount; i++) {
            const spark = document.createElement('div');
            spark.classList.add('clickSpark');
            const hue = Math.floor(Math.random() * 360);
            spark.style.background = `radial-gradient(circle, hsla(${hue},80%,60%,1) 10%, #fff 90%)`;
            const angle = Math.random() * 360;
            const distance = Math.random() * 70 + 30; // 30 to 100 px
            spark.style.transform = `translate(-50%, -50%) rotate(${angle}deg) translate(${distance}px)`;
            fireworkContainer.appendChild(spark);
          }

          setTimeout(() => {
            fireworkContainer.remove();
          }, 700);
        }, { passive: true });
      })();
    </script>
  </body>
</html>
